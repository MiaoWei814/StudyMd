# 笔记

## 1.什么是中间件

### 1.1 概述



​	由于业务和市场需求的不断变化,一个企业可能同时运行着多个不同的业务系统,而这些系统基于不同的操作系统、不同的数据库、异构的网络环境，现在的问题是，如何把这些`信息系统结合成一个有机地协同工作的整体`，真正实现企业跨平台、分布式应用。中间件便是解决之道，它用自己的复杂换取了企业应用的简单。

![image-20211017200855816](https://gitee.com/miawei/pic-go-img/raw/master/imgs/image-20211017200855816.png)

理解:其实中间件其实并不是什么高大上的名词,在我们的日常开发中也是随处可遇的!比如MySQL就是一种中间件的技术,当然他也要遵循一些规范与协议,比如TCP/IP协议,它只要遵守这个协议就能把数据写到硬盘上去,所以它具有一个功能就是持久化功能!而我们写的应用程序是Java写的,而我们使用Java也要去遵守这个TCP/IP协议才能与MySQL沟通!

中间件技术要解决的第一个问题就是:互通性;就是一定要可以通讯!

> 中间件（Middleware）是处于操作系统和应用程序之间的软件，也有人认为它应该属于操作系统中的一部分。人们在使用中间件时，往往是一组中间件集成在一起，构成一个平台（包括开发平台和运行平台），但在这组中间件中必须要有一个通信中间件，即中间件=平台+通信，这个定义也限定了只有用于分布式系统中才能称为中间件，同时还可以把它与支撑软件和实用软件区分开来。

理解:中间件就是指平台+通信,也就是说平台就是指Java开发的应用程序,它们遵守某一种协议和规范去和我们底层的操作系统硬件打交道!而这个中间件有个典型的特征,就是垮平台!



我们都知道现在流行的开发方式就是微服务架构或者分布式架构,而分布式架构的话就会把一个系统拆分成若干份!比如拆分成订单系统、支付系统、用户系统等等，那么现在这几个系统之间要实现互联.那么这就是一个问题,当我们把单体系统拆分成了分布式系统那么首先考虑的就是要采用什么中间件技术!并且要有最基本的遵循规范和通讯的功能,并且还要必须具备高可用和持久性!

![image-20211017203653909](https://gitee.com/miawei/pic-go-img/raw/master/imgs/image-20211017203653909.png)

综上所述:所有的中间件都必须要`遵守一定的规范`,而且还要具备我们的`高可用`、`高可扩`和我们的`持久性`这些特征。

好处:中间件可以屏蔽我们的操作系统底层的复杂性,就是说我们不需要去关心这个东西是怎么去存储的去互联互通的，我们只需要使用即可！也就是说我们众多的系统，比如用户系统就是用Java语言写的，订单系统就是用GO语言写的，使用了中间件技术就可以屏蔽我们应用程序之间架构的局限性，也就是说它们可以通过中间件技术把这些架构进行串联起来，来达到一个更加稳健、缩短我们的开发周期也可以减少维护成本的目的，这就是我们的中间件技术！

> 中间件技术与我们日常开发没有脱节，只是使用这些中间件技术它可以去屏蔽我们操作系统底层的复杂性，可以让我们的技术框架与应用程序变得更加的灵活，而不仅仅局限于单一架构的选型，让我们的系统变得更加的稳健和高效，并且这些中间件技术必须要具备这些互通性和沟通性以及持久性还有高可扩性，那么这也是它典型的一些特性，而这些典型的背后必须要遵循一个协议，就是我们所谓的TCP/IP，！

后面的话对于TCP/IP协议就变少了，因为TCP/ip是底层操作系统的协议,它并不能满足我们业务场景所有的需求,所以必须得在它的基础之上构建一个自己的请求信息,比如我们后面的AMQP协议,就会在请求头里增加一些消息内容的一些标签以及我们的交换机的名字等等等!



理解:我自己来总结一波:中间件往大了来说就是`把每个不同的信息系统进行协作串联一起`,变为一个整体进行开发!中间件呢官方一点来说就`是操作系统和应用程序之间的软件`,然后往往是一组中间件构建成一个平台然后还具有通信的功能;中间件必须要具有:遵守协议与规范、跨平台、高可用、高可扩、持久性、互通性、沟通性！其好处就是为了`屏蔽我们操作系统底层的复杂与局限性`！使程序开发人员面对一个简单而统一的开发环境，减少程序设计的复杂性，将注意力集中在自己的业务上，`不必再为程序在不同系统软件上的移植而重复工作`，从而大大减少了技术上的负担。

> 中间件是位于平台(硬件和操作系统)和应用之间的通用服务,这些服务具有标准的程序接口和协议。针对不同的操作系统和硬件平台，它们可以有符合接口和协议规范的多种实现。
>

![img](https://gitee.com/miawei/pic-go-img/raw/master/imgs/2018111321555179.jpg)

中间件有个很大的特点，是脱离于具体设计目标，而具备提供普遍独立功能需求的模块。这使得中间件一定是可替换的。如果一个系统设计中，中间件是不可替换的，不是架构、框架设计有问题，那么就是这个中间件，在 别处可能是个中间件，在这个系统内是引擎。

### 2.中间件分类



> 分布式消息中间件:

1. ActiveMQ
   - 遵循界面式规范AMQP协议的消息中间件,由Java语言开发是一款老牌的高性能的中间件,但是复杂性要比RabbitMQ高!现在企业使用较少!
2. RabbitMQ
   - 比较流行且企业使用较多,如滴滴美团等等,优点是支持分发的模式、持久化和它的机制是比较完善的，并且最大优点就是跟Spring是同一家公司开发的，所以Spring对它的支持也是很完善的!
3. Kafka
   - 是一款高性能的消息中间件,是基于TCP/IP协议的二级制的传输协议来进行开发的,它的性能是最高的,因为它最贴近与底层,但是缺点就是不支持事务!但是可以支持持久化和一些分发机制,所以说还是比较完善,在一些大数据领域下使用得比较多!
4. RocketMQ
   - 由阿里和滴滴联合开发出来的一款国产消息队列,但是还在开发维护阶段,处于一个不稳定的阶段!

使用场景:

```bash
消息中间件监控数据、异步数据传输场景、削疯填谷场景、任务调度场景、海量数据同步场景、分布式事务场景、日记管理场景、大数据分析场景
```

遵循协议与特性：

```bash
AMQP、MQTT、持久化设计、Kafka协议、消息发布设计、高可用设计、可靠性设计、容错设计
```

注意：TCP协议无法满足我们的定义和需求规范，所以才会在TCP/IP的基础之上再重新去构建了一些内容。所以就命名成了我们的AMQP协议，但是它的底层依然还是TCP/IP协议

> 负载均衡中间件

1. Nginx
2. LVS负载均衡软件
   - 是指如果Nginx发生了故障,我们也会Nginx作集群,这个Lvs进行一个架构与集群
3. KeepAlive
   - 保持心跳来维持我们的高可用的目的
4. CDN
   - 加速,可以使网站的访问速度成倍的提升